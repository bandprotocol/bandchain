const { Harmony, HarmonyExtension } = require("@harmony-js/core");
const { ChainID, ChainType } = require("@harmony-js/utils");

const url = "https://api.s0.b.hmny.io";
const hmy = new Harmony(url, {
  chainType: ChainType.Harmony,
  chainId: ChainID.HmyLocal,
});

// Bridge contract address
// Not used in logic
const bridgeAddress = "0x176fb19ddAf98f639C55A2008623B581821E7B42";

// Receiver contract address
const receiverAddress = "0x9bC94Ea1E6e024242D546F8f06d096931d8c72b5";

(async () => {
  // Test the receiver contract
  const tx = hmy.transactions.newTx({
    to: receiverAddress,
    data:
      "0x73122df2000000000000000000000000176fb19ddaf98f639c55a2008623b581821e7b42000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000018e0000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000009a0000000000000000000000000000000000000000000000000000000000000094000000000000000000000000000000000000000000000000000000000000768512b0811ce525f5253d2d56a7b0805134b0d7cce9ed137dd1d8cfe5b74e0137263d2063c26ba0f31d347e27fc9fa3766183b335b45ecf151443e6ea362f68f72ddf629c431f68d41964dfff4dfb20f0e260b38afc7de019f0c7986745c8c8e78852b6a7e0f44ed9c179a47a40f93d5824189a5426d6c3f77692de28e50e20a33ddc9cca4dbca49efc9f719e1525a39ab0501a2ab401e88c65914dbda22340a717d3561783e9c3bdf932a16580fc0c9ceffec4c509073fff65a42871bfab64408aefd9e544b2ad4d3d7cf1b9a8d0f297f87e0d67d83ce04b4712d63bddb8aa5d7079311d65792022af222ac7c5e4bdbaa7458d9aeaf9d5aebd91b4061fbec9bd80fea01cd62e714b603323a21a4a7382f8ab04788c867a0c99ade687d00e7d5fe6228d7f126cbeede6f3cbffc04764ad94f006ad306ce38559ab1900be98f9d0ca6cef139afbbfd951d03b35e7bddea6cf9a0179872935a34491856a9116722971d00000000000000000000000000000000000000000000000000000000000001a0000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000036000000000000000000000000000000000000000000000000000000000000004c000000000000000000000000000000000000000000000000000000000000006203a345fa396f02227ca291e6be06472d25acbfa8001f0d2d567961b5c0df03e2d60c058e53668c373f3cd2a167ab333ecdda9bd21b56459bf87178eb187737d5e000000000000000000000000000000000000000000000000000000000000001b00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000001074080211516807000000000022480a2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004512240a207a64bbf5b399fd7a26a05be9896a6158eaef2f4b083fd5796d72e1e2ef7f241b10012a0c089cdbfef905108fd28bd002320f62616e642d6775616e79752d706f61000000000000000000000000000000000000000000000000000000bcb4a00c6cf04b87564d7067e268e262a6c5dfaf6abb82abc9aee87d592e8eec40655e04066c81ab94245cb4dd9b38171d8b98aa8bb7192f712b3a470ca11237000000000000000000000000000000000000000000000000000000000000001b00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000001074080211516807000000000022480a2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004512240a207a64bbf5b399fd7a26a05be9896a6158eaef2f4b083fd5796d72e1e2ef7f241b10012a0c089cdbfef90510c890b8d102320f62616e642d6775616e79752d706f61000000000000000000000000000000000000000000000000000000956675133bb6f28c5c13af48c5ccb1912d4d8326621c54e6f71f3ae16484055f218ab9ebc39dbc8a8cbb7cf9278b839f191ec4584d3adeed7c2b1734a984e7b0000000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000001074080211516807000000000022480a2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004512240a207a64bbf5b399fd7a26a05be9896a6158eaef2f4b083fd5796d72e1e2ef7f241b10012a0c089cdbfef90510e89ec9d102320f62616e642d6775616e79752d706f61000000000000000000000000000000000000000000000000000000589543a9ee1d70ae55859f1ebfea0e5d2127dd9ab58e1af388bf1433d37008580b03e1612234d14233b692b07ecdaa198fe516ddf5396b4e1c1f32d5886da747000000000000000000000000000000000000000000000000000000000000001b00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000001074080211516807000000000022480a2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004512240a207a64bbf5b399fd7a26a05be9896a6158eaef2f4b083fd5796d72e1e2ef7f241b10012a0c089cdbfef90510fad3e7cf02320f62616e642d6775616e79752d706f610000000000000000000000000000000000000000000000000000001c25042a871603bdc7265fd66b6fcf2b3c3c15536aedd54ee7d22412edd885e01907d2a296eedae1a33e3a61076f93a784c936e95228cbf93ffeef3b806aa488000000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000001074080211516807000000000022480a2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004512240a207a64bbf5b399fd7a26a05be9896a6158eaef2f4b083fd5796d72e1e2ef7f241b10012a0c089cdbfef90510c7cd90b002320f62616e642d6775616e79752d706f610000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f20000000000000000000000000000000000000000000000000000000000007685100000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000076850000000000000000000000000000000000000000000000000000000000000032000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000966726f6d5f7363616e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000016000000034943580000000355534400000000000027100000000000000000000000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000007fdd0000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000005f3fad90000000000000000000000000000000000000000000000000000000005f3fad9600000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000000966726f6d5f7363616e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000017b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001300000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000768506b4490f4dd90c29cff33840beca0d04fd4bc826c25f22fbb1de876b63fabee730000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000076850b6d0eb3731d57270e7bac57bc8860b03d372f97e15d249ad8e07db846ad7cf2400000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000768503ce19e59d9bed92b185a54c13b8f186af0b890359fb75746931aced0efdd9c4000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000076850dc282180f44de4d89851ff043a28009b670086fe76f506f40ce90d1030894f9d000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000007685070b8f432226cc0c03fe1b111ba5ee3fec008f00840f22c4880284e3c9b32adfe00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000002200000000000000000000000000000000000000000000000000000000000768509cea1b23095170637280015b3f7150fba8e2e3bac16324c785c54cbf3b526897000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000070000000000000000000000000000000000000000000000000000000000000042000000000000000000000000000000000000000000000000000000000007685070d8c39dbe67575fa5aa4a401bb8a7f6736ab95892e4325ac6e11d3dfda179a80000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000c20000000000000000000000000000000000000000000000000000000000076850001f05dd72379168e4271bd711c71323f77f3e048c865119c1d272b509c0f4e60000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000900000000000000000000000000000000000000000000000000000000000001410000000000000000000000000000000000000000000000000000000000076850f46385fb02b89970bb4515f9d0857043bf8e093d4ede5268500d33967c93a9ad0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000023e00000000000000000000000000000000000000000000000000000000000768508733c477e0ec6278a3ef860b3612fb3b34f0dafc3bbf5734a568c52df969025e0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000b00000000000000000000000000000000000000000000000000000000000004340000000000000000000000000000000000000000000000000000000000076850cb7eee5a08fe9dd25f58795a1a9431b810cddb1af69a065052513f9fdb8998880000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000083000000000000000000000000000000000000000000000000000000000000768506f5fd6c97761182cb9093e275680f09302346126118caddef5c711f8a90b7d0c0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000d00000000000000000000000000000000000000000000000000000000000010300000000000000000000000000000000000000000000000000000000000076850f3f7025d03803cafad61dcb806f431023976e4c958953545ee9bdf84c21963860000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000303000000000000000000000000000000000000000000000000000000000000768505056cb284cf2977be792236e2e82fcecc1b6fc1aca825bbb3be700949ca96c6f0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000f00000000000000000000000000000000000000000000000000000000000050300000000000000000000000000000000000000000000000000000000000076850923d83a5b3dbc2926ae4b34714bd1b4e22f837bafd103636e0dc05f890bc78c900000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000801d00000000000000000000000000000000000000000000000000000000000768506854187b37126dd522e0b802c78f552306d3efe0fe36cd957c009bcff200bf670000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000001100000000000000000000000000000000000000000000000000000000000113560000000000000000000000000000000000000000000000000000000000076850b97d9b102fe66ee481e058cce7d8b365f00c01711088fcf2db6961d4eb86f31200000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000002589100000000000000000000000000000000000000000000000000000000000768509449448c39bc0e7058751c21b1e0dd3c35c2fe3422b8f35950ae810ab897b132000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000130000000000000000000000000000000000000000000000000000000000036be70000000000000000000000000000000000000000000000000000000000076850e1777fa1fe1cd68a6ba6034ae82b4327d2e6fa4e67015508db17a85917419735",
    value: "0",
    shardID: 0,
    toShardID: 0,
    gasLimit: "10000000",
    gasPrice: "1000000000",
  });

  // Testnet private key from .env
  hmy.wallet.addByPrivateKey(
    "0xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
  );
  // Address that derived from the private key
  hmy.wallet.setSigner("0x3aea49553Ce2E478f1c0c5ACC304a84F5F4d1f98");

  const signedTX = await hmy.wallet.signTransaction(tx);
  const [sentTX, txHash] = await signedTX.sendTransaction();

  console.log(sentTX);
  console.log(txHash);
  console.log("done");
})();
